---
name: systematic-debugging
description: Use when encountering any bug, test failure, or unexpected behavior, before proposing fixes
---

# Systematic Debugging

## 개요

임시적인 해결책은 시간을 낭비하고 새로운 버그를 만들어냅니다. 임시방편적인 수정은 근본적인 문제를 가립니다.

**핵심 원칙:** 문제 해결에 앞서 항상 근본 원인을 파악하십시오. 증상만 고치려 하면 실패입니다.

**이 절차를 문자 그대로 따르지 않는 것은 디버깅 정신을 어기는 것입니다.**

## The Iron Law

```
NO FIXES WITHOUT ROOT CAUSE INVESTIGATION FIRST
```

1단계를 완료하지 않았다면 수정 사항을 제안할 수 없습니다.

## When to Use

어떤 기술적인 문제라도 이 스킬을 사용합니다:

- 테스트 실패
- 프로덕션 버그
- 예상치 못한 동작
- 성능 문제
- 빌드 실패
- 통합 문제

**이 스킬을 특히 사용할 때:**

- 시간에 쫓기는 상황 (긴급 상황에서는 추측하고 싶은 유혹이 생기기 마련입니다)
- "간단한 해결책 하나면 충분해"라는 말은 너무나 당연해 보인다.
- 이미 여러 가지 해결 방법을 시도해 보셨습니다.
- 이전 해결 방법은 효과가 없었습니다.
- 당신은 이 문제를 제대로 이해하지 못하고 있습니다.

**이 스킬을 건너뛰지 마세요:**

- 문제는 간단해 보입니다 (단순한 버그에도 근본적인 원인이 있습니다).
- 너무 서두르시는군요 (서두르면 재작업이 불가피합니다).
- 관리자는 지금 당장 해결하길 원합니다 (체계적인 해결이 급하게 처리하는 것보다 빠릅니다).

## The Four Phases

각 단계를 완료하지 않았다면 다음 단계로 진행할 수 없습니다.

### Phase 1: Root Cause Investigation

**수정을 시도하기 전에 반드시 1단계를 완료해야 합니다:**

1. **에러 메시지 정확히 읽기**
   - 오류나 경고를 무시하지마세요.
   - 오류 메시지가 정확한 해결책을 포함할 수 있습니다.
   - 스택 트레이스를 완전히 읽으십시오.
   - 라인 번호, 파일 경로, 오류 코드를 기록하십시오.

2. **일관되게 재현하기**
   - 일관되게 재현할 수 있는지 확인하십시오.
   - 정확한 단계를 기록하십시오.
   - 항상 발생하는지 확인하십시오.
   - 재현할 수 없으면 추측하지 말고 더 데이터를 수집하세요.

3. **최근 변경사항 확인하기**
   - 무엇이 변경되었을 수 있었는지 확인하십시오.
   - Git diff, recent commits
   - 새로운 dependencies, config changes
   - 환경 차이

### Phase 2: Pattern Analysis

**수정을 시도하기전에 패턴을 찾아보세요:**

1. **작동하는 예제 찾기**
   - 같은 코드베이스에서 비슷한 코드를 찾으십시오.
   - 무엇이 작동하는지 확인하십시오.

2. **비교하기**
   - 패턴을 구현할 때, 완전히 읽으십시오.
   - 이해하기 전에 적용하지 마십시오.

3. **차이점 찾기**
   - 작동하는 코드와 문제가 있는 코드의 차이를 확인하십시오.
   - 모든 차이를 나열하십시오.
   - 모든 차이가 중요하지 않다고 가정하지 마십시오.

4. **의존성 이해**
   - 이 코드가 필요로 하는 다른 구성 요소는 무엇인가요?
   - 설정, 구성, 환경?
   - 이 코드가 무엇을 가정하는가요?

### Phase 3: Hypothesis and Testing

**과학적 방법:**

1. **단일 가설 제시**
   - 명확하게 제시: "X는 Y 때문에 근본 원인입니다."
   - 기록하십시오.
   - 구체적, 모호하지 않게.

2. **최소한 테스트**
   - 가설을 테스트하기 위해 가장 작은 변경사항을 적용하십시오.
   - 한 변수씩 적용하십시오.
   - 여러 가지 변경사항을 동시에 적용하지 마십시오.

3. **계속하기 전에 확인**
   - 테스트가 성공했습니까? Yes → Phase 4
   - 테스트가 실패했습니까? NEW 가설을 제시하십시오.
   - 추가 수정사항을 적용하지 마십시오.

4. **알 수 없을 때**
   - "X를 모르는 것"을 말씀하십시오.
   - 모욕하지 마십시오.
   - 도움을 청하십시오.
   - 더 연구하십시오.

### Phase 4: Implementation

**Fix the root cause, not the symptom:**

1. **실패 테스트 케이스 생성**
   - 가장 단순한 재현 방법
   - 가능하다면 자동화된 테스트
   - 프레임워크가 없다면 일회용 테스트 스크립트
   - 수정하기 전에 반드시 필요합니다.

2. **단일 수정사항 적용**
   - 근본 원인을 해결
   - 한 번에 한 가지 수정사항
   - "이곳에서" 개선은 하지 마십시오

3. **Verify Fix**
   - 테스트가 성공했습니까?
   - 다른 테스트가 깨졌습니까?
   - 문제가 해결되었습니까?

4. **수정이 실패했을 때**
   - 멈춰주세요.
   - 몇 개의 수정을 시도했습니까?
   - If < 3: Phase 1로 돌아가서 새로운 정보로 재분석
   - **If ≥ 3 이상이면 중단하고 아키텍처에 대해 질문하십시오**
   - 아키텍처에 대한 논의 없이 Fix #4를 시도하지 마십시오

5. **3+ 수정이 실패했을 때: 아키텍처 질문**

   **Pattern indicating architectural problem:**
   - 각 수정이 다른 위치에서 새로운 공유 상태/결합/문제를暴露出
   - 수정을 구현하기 위해 "대규모 리팩토링"이 필요합니다
   - 각 수정이 다른 위치에서 새로운 증상(문제)을 발생시킵니다

   **STOP and question fundamentals:**
   - 이 패턴이 기본적으로 정당한가요?
   - Are we "sticking with it through sheer inertia"?
   - 아키텍처를 리팩토링 vs 증상을 계속 수정할까요?

   **Discuss with your human partner before attempting more fixes**

   이는 실패한 가설이 아닙니다 - 이것은 잘못된 아키텍처입니다.

## 위험 신호 - 즉시 중단하고 절차를 따르십시오

만약 당신이 이런 생각을 하고 있는 것을 발견한다면:

- "일단은 임시방편으로 해결하고, 나중에 자세히 조사하자."
- "X 값을 바꿔보고 작동하는지 확인해 보세요."
- "여러 변경 사항을 추가하고 테스트를 실행하세요"
- "테스트는 건너뛰고 제가 직접 확인하겠습니다."
- "아마 X 때문일 거예요. 제가 고쳐볼게요."
- "완전히 이해는 안 되지만, 이렇게 하면 될 것 같아요."
- "패턴에는 X라고 되어 있지만, 저는 다르게 적용할 거예요."
- "주요 문제점은 다음과 같습니다. [조사 없이 해결책만 나열]"
- 데이터 흐름 추적 전에 해결책을 제시합니다.
- "한 번 더 수정 시도" (이미 2회 이상 시도했을 경우)
- 각각의 해결책은 다른 곳에서 새로운 문제를 드러냅니다.

**이 모든 것은 중단을 의미합니다. Phase 1로 돌아가십시오.**

**3회 이상의 해결 방법이 실패했을 경우:** 아키텍처를 재검토하십시오 (Phase 4.5 참조)

## 당신이 잘못하고 있다는 것을 알려주는 신호

**다음과 같은 리디렉션에 주의하세요:**

- "이 일이 일어나지 않는다는 건가요?" - 당신이 확인하지 않고 가정했습니다.
- "그게 우리에게 뭘 보여줄까요...?" - 증거 수집을 추가해야 합니다.
- "추측은 그만하세요" - 당신은 이해하지 않고 수정을 제시합니다.
- "이것을 극도로 깊이 생각해보세요" - 기본 원인을 질문하지 않고 증상을 수정합니다.
- "우리가 막혔나요?" (좌절하며) - 당신의 접근 방식이 작동하지 않습니다.

**이러한 신호를 발견하면:** STOP. Phase 1로 돌아가십시오.

## Common Rationalizations

| Excuse | Reality |
|--------|---------|
| "이 문제가 단순해서 프로세스가 필요하지 않아요" | 단순한 문제가 있지만, 기본 원인을 찾는 것이 필요합니다. |
| "이상황이 급격해서 프로세스가 필요하지 않아요" | 체계적인 디버깅은 시행착오식 시도보다 훨씬 빠릅니다.. |
| "이것을 먼저 시도하고 조사해보세요" | 첫 번째 수정이 전체 패턴을 결정합니다. 처음부터 제대로 하세요. |
| "테스트를 확인한 후 수정을 작성할게요" | 검증되지 않은 해결책은 효과가 없습니다. 먼저 테스트해야 효과가 입증됩니다. |
| "한 번에 여러 개의 수정을 시도하면 시간이 절약됩니다" | 무엇이 효과가 있었는지 파악할 수 없습니다. 새로운 버그가 발생합니다. |
| "참조가 너무 길어서 패턴을 수정할게요" | 부분적인 이해는 버그를 보장합니다. 전체를 읽어야 합니다. |
| "이 문제를 보고 수정할게요" | 증상만 보고 기본 원인을 파악할 수 없습니다. |
| "한 번 더 수정을 시도할게요" (2회 이상 실패 후) | 3회 이상 실패하면 아키텍처 문제가 있는 것입니다. 문제 해결 방식을 재검토하고, 반복 수정은 하지마세요. |
